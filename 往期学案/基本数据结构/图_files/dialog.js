(()=>{"use strict";var t={834:function(t,e,o){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return i(e,t),e},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var u=a(o(326)),l=c(o(900)),s="alimeconfig";function f(t){return"".concat(t?"pre-":"","retailbot.aliyuncs.com")}var d=function(){function t(t){var e=f(!!t.pre);this.options=Object.assign({botUrl:"https://".concat(e,"/intl/index.htm")},t),this.requestConfig().then(this.loadScript.bind(this))}return t.prototype.requestConfig=function(){var t=l.default.get(s);if(t&&(null==t?void 0:t.from)===this.options.from)return Promise.resolve(t);var e=f(!!this.options.pre);return(0,u.default)("https://".concat(e,"/api/home/dialogconfig"),{from:this.options.from,sourceURL:location.href}).then((function(t){var e=function(t){return t&&t.enable?{version:t.jsVersion,overview:t.title||t.closeText,size:"default",appId:t.appId,viewType:"weak",forecast:!1,from:t.from,avatar:t.icon}:null}(t);return e&&l.default.setCache(s,e),e})).catch((function(t){return console.error(t),null}))},t.prototype.loadScript=function(t){var e=this;if(t){var o=t.version||"0.1.0";this.config=n(n({},t),{viewType:"weak"});var r=this.options.pre?"dev.":"",i=this.options.umd?"umd.":"";(0,u.loadScript)("//".concat(r,"g.alicdn.com/mecloud/dialog/").concat(o,"/alicare-dialog.").concat(i,"js"),(function(o){o||"function"!=typeof window.AlicareDialog?console.error("[AlimeDialog] load dialog error"):e.instance=new window.AlicareDialog(e.options,t)}))}},t}();window.AlimeDialog=function(t){return new d(t)}},326:function(t,e,o){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0,e.loadScript=void 0;var r,i=n(o(122));function a(t,e){var o=document.createElement("script");o.async=!0,o.charset="utf-8";var n=!1;o.onerror=function(o){"function"==typeof e&&e({url:t,event:o})},o.onload=o.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,"function"==typeof e&&e(),o.onload=o.onreadystatechange=null,o&&o.parentNode&&o.parentNode.removeChild(o))},o.src=t,r||(r=document.getElementsByTagName("head")[0]),r.appendChild(o)}e.loadScript=a;var c=0;function u(){}e.default=function(t,e,o){var n=(null==o?void 0:o.paramName)||"callback",r=(null==o?void 0:o.callbackName)||"".concat(n,"_json").concat(++c),l=Object.assign({},e,{_input_charset:"utf-8",callback:r}),s=i.default.join(t,l);return new Promise((function(t,e){var o,n=null!==(o=window[r])&&void 0!==o?o:u;window[r]=function(o){(null==o?void 0:o.success)?t(o.data):e(o),"function"==typeof n&&n()},a(s,(function(t){t&&e(t)}))}))}},900:(t,e)=>{e.__esModule=!0;var o=function(){function t(t){void 0===t&&(t="MECLOUD_STORAGEKEY"),this.data={},this.key=t,this.read()}return t.prototype.read=function(){var t;try{this.data=JSON.parse(null!==(t=window.localStorage.getItem(this.key))&&void 0!==t?t:"{}")}catch(t){console.error("[AlimeDialog] read storage error")}},t.prototype.write=function(){try{window.localStorage.setItem(this.key,JSON.stringify(this.data))}catch(t){console.error("[AlimeDialog] write storage error")}},t.prototype.get=function(t){var e=this.data[t]||[],o=e[0],n=e[1],r=e[2];if(void 0===o||!1===r)return o;var i=r;if("boolean"==typeof i&&i&&(i=36e5),!("number"==typeof r&&Date.now()-n>i))return o;delete this.data[t]},t.prototype.set=function(t,e,o){this.data[t]=[e,Date.now(),null!=o&&o],this.write()},t.prototype.setCache=function(t,e,o){void 0===o&&(o=6e4),this.set(t,e,o)},t}();e.default=new o},122:(t,e)=>{e.__esModule=!0,e.default={join:function t(e,o){var n=e.split("#"),r=n[0],i=n[1];if(i)return t(r,o)+"#"+i;var a=-1!==e.indexOf("?")?"&":"?",c=[];return o&&Object.keys(o).forEach((function(t){c.push("".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(o[t])))})),"".concat(e).concat(a).concat(c.join("&"))}}}},e={};(function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,o),i.exports})(834)})();